<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Rank Command</title>
</head>
<body>
    <div id="rankResult">Loading...</div>

    <script>
        // Get username from URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const username = urlParams.get('username') || 'ANAKINSKYWALKER';
        const tag = urlParams.get('tag') || 'HARR';
        const region = urlParams.get('region') || 'eu';

        // API configuration
        const API_KEY = 'HDEV-6e8ce2b6-0be9-4653-81f6-ee2f4faf32a4';
        const API_URL = `https://api.henrikdev.xyz/valorant/v3/mmr/${region}/pc/${username}/${tag}?api_key=${API_KEY}`;

        // Function to fetch rank data
        async function fetchRankData() {
            try {
                const response = await fetch(API_URL);
                const data = await response.json();

                if (data.status === 200 && data.data) {
                    const currentData = data.data.current;
                    if (currentData) {
                        const rankName = currentData.tier?.name || 'Unknown';
                        const rr = currentData.rr || 0;

                        // Display just the raw text result
                        const formattedResult = `${username} â€” ${rankName} ${rr}rr`;
                        document.getElementById('rankResult').textContent = formattedResult;

                    } else {
                        document.getElementById('rankResult').textContent = 'No current rank data found';
                    }
                } else {
                    document.getElementById('rankResult').textContent = `API Error: ${data.message || 'Unknown error'}`;
                }
            } catch (error) {
                document.getElementById('rankResult').textContent = `Network Error: ${error.message}`;
            }
        }

        // Fetch data when page loads
        fetchRankData();
    </script>
</body>
</html>
